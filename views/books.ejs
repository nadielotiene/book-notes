<%- include('partials/header.ejs'); -%>

<div class="page-wrapper">
    <main class="card">
        <h1 class="title">Book Notes</h1>
        <a href="/books/new" class="add btn">
            <img class="icon" src="/assets/icons/pencil-square.svg" alt="add new book icon"/> 
            Add New Book</a>

        <% if (books.length === 0) { %>
            <p>No books saved yet. Try searching by ISBN!</p>
        <% } else { %>
            <div class="book-grid">
                <% books.forEach(book => { %>
                <div class="book-card">
                    <div class="img--div">
                        <img 
                        class="book-cover"
                        src="<%= book.cover_url || '/assets/no_cover_available.png' %>"
                        onerror="this.src='/assets/no_cover_available.png'"
                        alt="Cover for <%= book.title %>"
                        width="150"
                        >
                    </div>
                    <div class="info--div">
                        <h2 class="book-title"><%= book.title %></h2>
                        <h3 class="book-author">by <%= book.author %></h3>
                        <p class="publish-date"><%= book.publish_date || 'Unknown date' %></p>
                        <p class="isbn">ISBN: <%= book.isbn || "N/A" %></p>
                        <!-- <a href="#" class="want-to-read">‚ûï</a>
                        <a href="#" class="already-read">‚úîÔ∏è</a>
                        <a href="#" class="dont-want-to-read">üö´</a> -->
                        <p class="notes"><%= book.notes || "No notes yet" %></p>
                        <a class="btn" href="/book/<%= book.id %>">
                            <img class="icon" src="/assets/icons/three-dots.svg" alt="trash can">
                            View Details</a><br/>
                        <a class="btn" href="/books/<%= book.id %>/edit" class="edit--button">
                            <img class="icon" src="/assets/icons/pencil.svg" alt="trash can">
                            Edit</a>

                        <form action="/books/<%= book.id %>/delete" method="POST" style="display:inline;">
                            <button class="delete btn" type="submit" onclick="return confirm('Are you sure you want to delete this book?');">
                                <img class="icon" src="/assets/icons/trash3.svg" alt="trash can"> Delete
                            </button>
                        </form>
                    </div>
                </div>
                <div class="hr"></div>
                <% }) %>
            </div>
        <% } %>
    </main>
</div>

<%- include('partials/footer.ejs'); -%>
