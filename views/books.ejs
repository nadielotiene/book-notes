<%- include('partials/header.ejs'); -%>

<div class="page-wrapper">
    <main class="card">
        <h1 class="app-title">Book Notes</h1>
        <a href="/books/new" class="add--button">‚ûï Add New Book</a>

        <% if (books.length === 0) { %>
            <p>No books saved yet. Try searching by ISBN!</p>
        <% } else { %>
            <div class="book-grid">
                <% books.forEach(book => { %>
                <div class="book-card">
                    <img 
                    src="<%= book.cover_url || '/assets/no_cover_available.png' %>"
                    onerror="this.src='/assets/no_cover_available.png'"
                    alt="Cover for <%= book.title %>"
                    width="150"
                    >
                    <h2 class="book-title"><%= book.title %></h2>
                    <h3 class="book-author">by <%= book.author %></h3>
                    <p class="publish-date"><%= book.publish_date || 'Unknown date' %></p>
                    <!-- <a href="#" class="want-to-read">‚ûï</a>
                    <a href="#" class="already-read">‚úîÔ∏è</a>
                    <a href="#" class="dont-want-to-read">üö´</a> -->
                    <p class="notes"><%= book.notes || "No notes yet" %></p>
                    <a href="/book/<%= book.id %>">View Details</a>
                    <a href="/books/<%= book.id %>/edit" class="edit--button">Edit</a>

                    <form action="/books/<%= book.id %>/delete" method="POST" style="display:inline;">
                        <button type="submit" onclick="return confirm('Are you sure you want to delete this book?');">
                            Delete
                        </button>
                    </form>
                </div>
                <% }) %>
            </div>
        <% } %>
    </main>
</div>

<%- include('partials/footer.ejs'); -%>
